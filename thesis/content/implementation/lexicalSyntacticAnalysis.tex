\section{Lexical and syntactic analysis}
\begin{itemize}
    \item Describe grammar structure
    \item Different elements of grammar
\end{itemize}
The lexical and syntactic analysis steps of the compiler are not implemented by hand but ANTLR4 is used to generate both the lexer and parser. In Sec.~\ref{sec:background_compilerTools}, a shot introduction is given into the generation tool. The tool does not only generate the lexer and parser for the language but also some data structures, like the parse tree, and abstract classes that are used for the following compiler steps. In the following, we discuss the ANTLR grammar of Luie and give an overview of the different classes that are generated by ANTLR.

\subsection{Grammar}
The entry point for the grammar is a parsing rule called \texttt{parse}. It states that the program consists of a main code block followed by the end of file lexer token \texttt{EOF}. The main code block starts with arbitrarily many gate declarations, or none at all, and is followed by any number of declarations and statements in any order, or none at all. Similarly, a ``normal'' code block also consists of any number of declarations and statement; however, it does not allow for gate declaration. The grammar for the entry point, main and general code block is depicted in Fig.~\ref{fig:implementation_grammarStructure}

\begin{figure}[htp]
    \centering
    \lstinputlisting[style=ANTLR]{../figures/code/grammar_structure.g4}
    \caption{The basic structure parsing rules of Luie.}
    \label{fig:implementation_grammarStructure}
\end{figure}

While syntactically it would be equal to say the main block consists of gate declarations and a code block, the code generation implementation requires the main code block to directly hold the declarations and statements. Internally, each code block object holds a list of declarations and statements which, in turn, can hold references to other codeblocks. However, a block itself cannot hold a reference to another block. Furthermore, the code generation is only called on the main code block which, then, recursively calls the code generation for each declaration and statement. Therefore, the main code block needs to contain the declarations and statements directly, otherwise the code generation will alway generate an empty program. 

gate declarations...
\begin{figure}[htp]
    \centering
    \lstinputlisting[style=ANTLR]{../figures/code/grammar_declarations.g4}
    \caption{The basic structure parsing rules of Luie.}
    \label{fig:implementation_grammarDeclarations}
\end{figure}

\subsection{Data structures and classes}
